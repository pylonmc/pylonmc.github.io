
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Minecraft Pylon plugin">
      
      
        <meta name="author" content="PylonMC">
      
      
      
        <link rel="prev" href="../advanced-lore/">
      
      
        <link rel="next" href="../full-code/">
      
      
      <link rel="icon" href="../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Persistent data - Pylon Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#persistent-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Pylon Docs" class="md-header__button md-logo" aria-label="Pylon Docs" data-md-component="logo">
      
  <img src="../../../img/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pylon Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Persistent data
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/pylonmc/pylon-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  What is Pylon?

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../installation/installing-pylon/" class="md-tabs__link">
          
  
  
  Installation

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../getting-started/" class="md-tabs__link">
          
  
  
  Creating addons

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/fluids/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../javadocs/" class="md-tabs__link">
        
  
  
    
  
  Javadocs

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../contributing/getting-started/" class="md-tabs__link">
          
  
  
  Contributing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Pylon Docs" class="md-nav__button md-logo" aria-label="Pylon Docs" data-md-component="logo">
      
  <img src="../../../img/favicon.png" alt="logo">

    </a>
    Pylon Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pylonmc/pylon-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is Pylon?
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/installing-pylon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing Pylon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/list-of-addons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    List of addons
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/commands-and-permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands & permissions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Creating addons
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Creating addons
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Your first item
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Your first item
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../your-first-item/adding-an-item/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding an item
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../your-first-item/running-your-addon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running your addon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../your-first-item/adding-name-and-lore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding name & lore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../your-first-item/full-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Full code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../your-first-item/practice-tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Practice tasks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Custom items
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Custom items
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-a-custom-item/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding a custom item
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../making-items-configurable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Making items configurable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-lore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced lore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Persistent data
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Persistent data
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#item-constructors" class="md-nav__link">
    <span class="md-ellipsis">
      Item Constructors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#persistent-data-containers-pdcs" class="md-nav__link">
    <span class="md-ellipsis">
      Persistent data containers (PDCs)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-baguette-of-wisdom" class="md-nav__link">
    <span class="md-ellipsis">
      The Baguette of Wisdom
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Baguette of Wisdom">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-idea" class="md-nav__link">
    <span class="md-ellipsis">
      The idea
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-item" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the item
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-config-for-the-xp-capacity" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a config for the XP capacity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improving-the-lore" class="md-nav__link">
    <span class="md-ellipsis">
      Improving the lore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-chargedischarge-mechanic" class="md-nav__link">
    <span class="md-ellipsis">
      The charge/discharge mechanic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-charge-logic" class="md-nav__link">
    <span class="md-ellipsis">
      The charge logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-discharge-logic" class="md-nav__link">
    <span class="md-ellipsis">
      The discharge logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-placeholder" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a placeholder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-it-out" class="md-nav__link">
    <span class="md-ellipsis">
      Testing it out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-default-value" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a default value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleaning-up" class="md-nav__link">
    <span class="md-ellipsis">
      Cleaning up
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../full-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Full code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practice-tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Practice tasks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/fluids/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fluids
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../javadocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Javadocs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/contributing-to-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing to docs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#item-constructors" class="md-nav__link">
    <span class="md-ellipsis">
      Item Constructors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#persistent-data-containers-pdcs" class="md-nav__link">
    <span class="md-ellipsis">
      Persistent data containers (PDCs)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-baguette-of-wisdom" class="md-nav__link">
    <span class="md-ellipsis">
      The Baguette of Wisdom
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Baguette of Wisdom">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-idea" class="md-nav__link">
    <span class="md-ellipsis">
      The idea
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-item" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the item
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-config-for-the-xp-capacity" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a config for the XP capacity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improving-the-lore" class="md-nav__link">
    <span class="md-ellipsis">
      Improving the lore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-chargedischarge-mechanic" class="md-nav__link">
    <span class="md-ellipsis">
      The charge/discharge mechanic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-charge-logic" class="md-nav__link">
    <span class="md-ellipsis">
      The charge logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-discharge-logic" class="md-nav__link">
    <span class="md-ellipsis">
      The discharge logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-placeholder" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a placeholder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-it-out" class="md-nav__link">
    <span class="md-ellipsis">
      Testing it out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-default-value" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a default value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleaning-up" class="md-nav__link">
    <span class="md-ellipsis">
      Cleaning up
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="persistent-data">Persistent data</h1>
<h2 id="item-constructors">Item Constructors</h2>
<p>You might assume that the baguette flamethrower's constructor is called every time the item is created - eg, every time we craft a baguette. But this is <strong>not</strong> the case.</p>
<p>The important thing to know is <strong>item constructors can be invoked arbitrarily, and not just when the item is 'created'</strong>.</p>
<details class="question">
<summary>Wait... why can constructors be called arbitrarily?</summary>
<p><em>(sigh)</em> It's complicated. To make a long story short...</p>
<p>Pylon can't keep track of every single item at all times. If we could actually modify the core server code, then this would be possible. Instead, Pylon only <em>temporarily</em> track Pylon items.</p>
<p>For example, when we right click an entity with the baguette flamethrower, Pylon listens to the <a href="https://jd.papermc.io/paper/1.21.8/org/bukkit/event/player/PlayerInteractEntityEvent.html">PlayerInteractEntityEvent</a> and sees that an entity has been right clicked with an item. In order to figure out what item it is - and if it's even a Pylon item at all - Pylon has to look at the key stored inside the item. But even if Pylon knows the key, it still don't know much about the item. Does the item implement <a href="https://pylonmc.github.io/pylon-core/docs/javadoc/io/github/pylonmc/pylon/core/item/base/PylonItemEntityInteractor.html">PylonItemEntityInteractor</a>? If so, Pylon needs to call its <code>onUsedToRightClickEntity</code>.</p>
<p>This is where the constructor comes in. We can look up what class the item corresponds to - in this case BaguetteFlamethrower - and create a new instance of it. Then, we can call the <code>onUsedToRightClickEntity</code> method.</p>
</details>
<p>What all this means is that <strong>the class can be created or destroyed at any time</strong>. Any data we store in fields is temporary.</p>
<p>But suppose we want to store the charge level of a portable battery. If we can't store the charge level in a field, where the hell <em>can</em> we store it?</p>
<hr />
<h2 id="persistent-data-containers-pdcs">Persistent data containers (PDCs)</h2>
<div class="admonition info">
<p class="admonition-title">PDCs are added by Spigot/Paper, not Pylon. </p>
<p>We are covering them here because they're used for essentially all persistent data storage (including for blocks and entities) in Pylon.</p>
</div>
<p><a href="https://docs.papermc.io/paper/dev/pdc/">Persistent data container</a>s (PDCs) are a way to persistently store arbitrary data on an item. You can think of them as a similar sort of thing to YAML. You can 'set' keys and you can 'get' keys, and the keys can have different kinds of data - like strings, ints, or even other PDCs.</p>
<p>Take our example of keeping track of the charge level of a portable battery. We can store the charge level in the <code>charge_level</code> key in the item's PDC. It will then be saved when the item is put in a chest, or when the server restarts.</p>
<p>If this is all a bit confusing - don't worry, an example should make it clearer.</p>
<hr />
<h2 id="the-baguette-of-wisdom">The Baguette of Wisdom</h2>
<h3 id="the-idea">The idea</h3>
<p><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ&amp;list=RDdQw4w9WgXcQ">Studies have shown</a> that those who eat baguettes have a 68% higher IQ on average. Let's use this as inspiration for our addon. We'll create a 'Baguette of Wisdom' which allows you to transfer experience from one player to another.</p>
<p>Here's the plan:</p>
<ul>
<li>The baguette has a maximum XP capacity</li>
<li>You can right click with the baguette to 'charge' it with experience</li>
<li>You can shift right click with the baguette to discharge the experience</li>
</ul>
<p>To do this, we're going to need to keep track of how much experience the baguette has inside of it.</p>
<h3 id="creating-the-item">Creating the item</h3>
<p>You know the drill from last time:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">MyAddon.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">NamespacedKey</span><span class="w"> </span><span class="n">baguetteOfWisdomKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;baguette_of_wisdom&quot;</span><span class="p">);</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="n">ItemStack</span><span class="w"> </span><span class="n">baguetteOfWisdom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemStackBuilder</span><span class="p">.</span><span class="na">pylonItem</span><span class="p">(</span><span class="n">Material</span><span class="p">.</span><span class="na">BREAD</span><span class="p">,</span><span class="w"> </span><span class="n">baguetteOfWisdomKey</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="n">PylonItem</span><span class="p">.</span><span class="na">register</span><span class="p">(</span><span class="n">BaguetteOfWisdom</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">baguetteOfWisdom</span><span class="p">);</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="n">BasePages</span><span class="p">.</span><span class="na">FOOD</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">baguetteOfWisdomKey</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaguetteOfWisdom</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PylonItem</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BaguetteOfWisdom</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">ItemStack</span><span class="w"> </span><span class="n">stack</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">stack</span><span class="p">);</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">en.yml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="nt">item</span><span class="p">:</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="nt">baguette_of_wisdom</span><span class="p">:</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Baguette</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">Wisdom&quot;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="nt">lore</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">      </span><span class="no">&lt;arrow&gt; Use the power of baguettes to transfer XP</span>
</code></pre></div></td></tr></table></div>
<h3 id="adding-a-config-for-the-xp-capacity">Adding a config for the XP capacity</h3>
<p>Now, let's add a config value for the max XP capacity:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaguetteOfWisdom</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PylonItem</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="hll"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xpCapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getSettings</span><span class="p">().</span><span class="na">getOrThrow</span><span class="p">(</span><span class="s">&quot;xp-capacity&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><a id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BaguetteOfWisdom</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">ItemStack</span><span class="w"> </span><span class="n">stack</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">stack</span><span class="p">);</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">baguette_of_wisdom.yml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nt">xp-capacity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200</span>
</code></pre></div></td></tr></table></div>
<p>We'll be using this later.</p>
<h3 id="improving-the-lore">Improving the lore</h3>
<p>Let's add some instructions to the lore, and attributes for the max charge and current charge:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">en.yml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span>
<span class="normal"><a href="#__codelineno-5-7">7</a></span>
<span class="normal"><a href="#__codelineno-5-8">8</a></span>
<span class="normal"><a href="#__codelineno-5-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nt">item</span><span class="p">:</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">  </span><span class="nt">baguette_of_wisdom</span><span class="p">:</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Baguette</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">Wisdom&quot;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="nt">lore</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">      </span><span class="no">&lt;arrow&gt; Use the power of baguettes to transfer XP</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="hll"><span class="w">      </span><span class="no">&lt;arrow&gt; &lt;insn&gt;Right click&lt;/insn&gt; to charge with XP</span>
</span><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="hll"><span class="w">      </span><span class="no">&lt;arrow&gt; &lt;insn&gt;Shift right click&lt;/insn&gt; to discharge stored XP</span>
</span><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="hll"><span class="w">      </span><span class="no">&lt;arrow&gt; &lt;attr&gt;XP capacity:&lt;/attr&gt; %xp_capacity%</span>
</span><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="hll"><span class="w">      </span><span class="no">&lt;arrow&gt; &lt;attr&gt;Stored XP:&lt;/attr&gt; %stored_xp%</span>
</span></code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaguetteOfWisdom</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PylonItem</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xpCapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getSettings</span><span class="p">().</span><span class="na">getOrThrow</span><span class="p">(</span><span class="s">&quot;xp-capacity&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BaguetteOfWisdom</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">ItemStack</span><span class="w"> </span><span class="n">stack</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">stack</span><span class="p">);</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="hll"><span class="w">    </span><span class="nd">@Override</span>
</span><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PylonArgument</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getPlaceholders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
</span><a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="hll"><span class="w">                </span><span class="n">PylonArgument</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;xp_capacity&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">UnitFormat</span><span class="p">.</span><span class="na">EXPERIENCE</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">xpCapacity</span><span class="p">))</span>
</span><a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="hll"><span class="w">                </span><span class="c1">// TODO add stored_xp placeholder</span>
</span><a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="hll"><span class="w">        </span><span class="p">);</span>
</span><a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span><a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>All of this should be familiar from the <a href="../advanced-lore/">advanced lore</a> section.</p>
<h3 id="the-chargedischarge-mechanic">The charge/discharge mechanic</h3>
<p>Next, let's allow the player to charge by right clicking, and discharge by shift right clicking.</p>
<p>We can use the <a href="https://pylonmc.github.io/pylon-core/docs/javadoc/io/github/pylonmc/pylon/core/item/base/PylonInteractor.html">PylonInteractor</a> class to do this:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span>
<span class="normal"><a href="#__codelineno-7-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="hll"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaguetteOfWisdom</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PylonItem</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PylonInteractor</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xpCapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getSettings</span><span class="p">().</span><span class="na">getOrThrow</span><span class="p">(</span><span class="s">&quot;xp-capacity&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BaguetteOfWisdom</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">ItemStack</span><span class="w"> </span><span class="n">stack</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">stack</span><span class="p">);</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PylonArgument</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getPlaceholders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="w">                </span><span class="n">PylonArgument</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;xp_capacity&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">UnitFormat</span><span class="p">.</span><span class="na">EXPERIENCE</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">xpCapacity</span><span class="p">))</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="w">                </span><span class="c1">// TODO add stored_xp placeholder</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="w">        </span><span class="p">);</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="hll"><span class="w">    </span><span class="nd">@Override</span>
</span><a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onUsedToRightClick</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">PlayerInteractEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="hll"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">isSneaking</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-7-19" name="__codelineno-7-19"></a><span class="hll"><span class="w">            </span><span class="c1">// TODO discharge logic</span>
</span><a id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="hll"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="hll"><span class="w">            </span><span class="c1">// TODO charge logic</span>
</span><a id="__codelineno-7-22" name="__codelineno-7-22"></a><span class="hll"><span class="w">        </span><span class="p">}</span>
</span><a id="__codelineno-7-23" name="__codelineno-7-23"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span><a id="__codelineno-7-24" name="__codelineno-7-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="the-charge-logic">The charge logic</h3>
<p>Let's now do the <strong>charge</strong> logic. In order to charge a Baguette of Wisdom, we need to store its charge level. As mentioned beforehand, we can use the item's <a href="https://docs.papermc.io/paper/dev/pdc/">persistent data container</a> to do this. To start with, let's just set the charge level to 50:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nd">@Override</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onUsedToRightClick</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">PlayerInteractEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">isSneaking</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">        </span><span class="c1">// TODO discharge logic</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="hll"><span class="w">        </span><span class="n">getStack</span><span class="p">().</span><span class="na">editPersistentDataContainer</span><span class="p">(</span><span class="n">pdc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pdc</span><span class="p">.</span><span class="na">set</span><span class="p">(</span>
</span><a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="hll"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="hll"><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span><span class="p">,</span>
</span><a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="hll"><span class="w">                </span><span class="mi">50</span>
</span><a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="hll"><span class="w">        </span><span class="p">));</span>
</span><a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>As you can see, we need to provide three things to set a PDC value: the <strong>key</strong>, the <strong>serializer</strong>, and the <strong>value</strong>. </p>
<p>The serializer is just a 'thing' that describes how to convert your type into a more primitive type that can be stored on disk - we won't go into details. You need a serializer for every type that you want to store - so you can't store, for example, <code>MyAddon</code> in a persistent data container as there is no serializer for it and it doesn't make sense to create one anyway.</p>
<div class="admonition info">
<p class="admonition-title">You can find a full list of serializers <a href="https://pylonmc.github.io/pylon-core/docs/javadoc/io/github/pylonmc/pylon/core/datatypes/PylonSerializers.html">here</a></p>
</div>
<p>Ok. But what we really need to do is 'top up' the stored xp using the player's experience:</p>
<ol>
<li>Read how much XP we already have stored</li>
<li>Figure out how much XP we need to take to get to <code>xpCapacity</code></li>
<li>Take as much XP from the player as we can to get there</li>
<li>Set the new XP amount</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span>
<span class="normal"><a href="#__codelineno-9-23">23</a></span>
<span class="normal"><a href="#__codelineno-9-24">24</a></span>
<span class="normal"><a href="#__codelineno-9-25">25</a></span>
<span class="normal"><a href="#__codelineno-9-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nd">@Override</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onUsedToRightClick</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">PlayerInteractEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">isSneaking</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">        </span><span class="c1">// TODO discharge logic</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="hll"><span class="w">        </span><span class="c1">// 1. Read how much XP we already have stored</span>
</span><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="hll"><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">xp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getStack</span><span class="p">().</span><span class="na">getPersistentDataContainer</span><span class="p">().</span><span class="na">get</span><span class="p">(</span>
</span><a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="hll"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="hll"><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span>
</span><a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="hll"><span class="w">        </span><span class="p">);</span>
</span><a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="hll">
</span><a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="hll"><span class="w">        </span><span class="c1">// 2. Figure out how much XP we need to take to get to `xpCapacity`</span>
</span><a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="hll"><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">extraXpNeeded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xpCapacity</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">xp</span><span class="p">;</span>
</span><a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="hll">
</span><a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="hll"><span class="w">        </span><span class="c1">// 3. Take as much XP from the player as we can to get there</span>
</span><a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="hll"><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">xpToTake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">calculateTotalExperiencePoints</span><span class="p">(),</span><span class="w"> </span><span class="n">extraXpNeeded</span><span class="p">);</span>
</span><a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="hll"><span class="w">        </span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">giveExp</span><span class="p">(</span><span class="o">-</span><span class="n">xpToTake</span><span class="p">);</span>
</span><a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="hll">
</span><a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="hll"><span class="w">        </span><span class="c1">// 4. Set the new stored XP amount</span>
</span><a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="hll"><span class="w">        </span><span class="n">getStack</span><span class="p">().</span><span class="na">editPersistentDataContainer</span><span class="p">(</span><span class="n">pdc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pdc</span><span class="p">.</span><span class="na">set</span><span class="p">(</span>
</span><a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="hll"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="hll"><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span><span class="p">,</span>
</span><a id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="hll"><span class="w">                </span><span class="n">xp</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">xpToTake</span>
</span><a id="__codelineno-9-24" name="__codelineno-9-24"></a><span class="hll"><span class="w">        </span><span class="p">));</span>
</span><a id="__codelineno-9-25" name="__codelineno-9-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-9-26" name="__codelineno-9-26"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="the-discharge-logic">The discharge logic</h3>
<p>And now for the discharge logic, which is quite similar:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nd">@Override</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onUsedToRightClick</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">PlayerInteractEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">isSneaking</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="hll"><span class="w">        </span><span class="c1">// 1. Read how much XP we have stored</span>
</span><a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="hll"><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">xp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getStack</span><span class="p">().</span><span class="na">getPersistentDataContainer</span><span class="p">().</span><span class="na">get</span><span class="p">(</span>
</span><a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="hll"><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="hll"><span class="w">            </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span>
</span><a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="hll"><span class="w">        </span><span class="p">);</span>
</span><a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="hll">
</span><a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="hll"><span class="w">        </span><span class="c1">// 2. Give all the XP to the player</span>
</span><a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="hll"><span class="w">        </span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">giveExp</span><span class="p">(</span><span class="n">xp</span><span class="p">);</span>
</span><a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="hll">
</span><a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="hll"><span class="w">        </span><span class="c1">// 3. Set the stored XP to 0</span>
</span><a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="hll"><span class="w">        </span><span class="n">getStack</span><span class="p">().</span><span class="na">editPersistentDataContainer</span><span class="p">(</span><span class="n">pdc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pdc</span><span class="p">.</span><span class="na">set</span><span class="p">(</span>
</span><a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="hll"><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="hll"><span class="w">            </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span><span class="p">,</span>
</span><a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="hll"><span class="w">            </span><span class="mi">0</span>
</span><a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="hll"><span class="w">        </span><span class="p">));</span>
</span><a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="w">        </span><span class="p">...</span>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="adding-a-placeholder">Adding a placeholder</h3>
<p>Finally, let's add in the placeholder for the stored charge:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nd">@Override</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="kd">public</span><span class="w"> </span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PylonArgument</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getPlaceholders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">            </span><span class="n">PylonArgument</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;xp_capacity&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">UnitFormat</span><span class="p">.</span><span class="na">EXPERIENCE</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">xpCapacity</span><span class="p">)),</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="hll"><span class="w">            </span><span class="n">PylonArgument</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;stored_xp&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">UnitFormat</span><span class="p">.</span><span class="na">EXPERIENCE</span><span class="p">.</span><span class="na">format</span><span class="p">(</span>
</span><a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="hll"><span class="w">                    </span><span class="n">getStack</span><span class="p">().</span><span class="na">getPersistentDataContainer</span><span class="p">().</span><span class="na">get</span><span class="p">(</span>
</span><a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="hll"><span class="w">                            </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="hll"><span class="w">                            </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span>
</span><a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="hll"><span class="w">                    </span><span class="p">))</span>
</span><a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="hll"><span class="w">            </span><span class="p">)</span>
</span><a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">    </span><span class="p">);</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="testing-it-out">Testing it out</h3>
<p>Now let's start the server and test our glorious new item. Try giving yourself a Baguette of Wisdom.</p>
<p>Obviously, as I am an expert programmer, it will work perfectly the first time and nothing will go wro- <em>huh</em>?</p>
<p><img alt="Baguette of wisdom error" src="../img/baguette_of_wisdom_error.png" /></p>
<p>What nonsense is this? Have the brits sabotaged us again?!</p>
<p>When something like this happens, your first port of call should always be the server console to see if any errors have been logged. And indeed, if you have a look in the console you should find the following error:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">console</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span>
<span class="normal"><a href="#__codelineno-12-22">22</a></span>
<span class="normal"><a href="#__codelineno-12-23">23</a></span>
<span class="normal"><a href="#__codelineno-12-24">24</a></span>
<span class="normal"><a href="#__codelineno-12-25">25</a></span>
<span class="normal"><a href="#__codelineno-12-26">26</a></span>
<span class="normal"><a href="#__codelineno-12-27">27</a></span>
<span class="normal"><a href="#__codelineno-12-28">28</a></span>
<span class="normal"><a href="#__codelineno-12-29">29</a></span>
<span class="normal"><a href="#__codelineno-12-30">30</a></span>
<span class="normal"><a href="#__codelineno-12-31">31</a></span>
<span class="normal"><a href="#__codelineno-12-32">32</a></span>
<span class="normal"><a href="#__codelineno-12-33">33</a></span>
<span class="normal"><a href="#__codelineno-12-34">34</a></span>
<span class="normal"><a href="#__codelineno-12-35">35</a></span>
<span class="normal"><a href="#__codelineno-12-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>[12:51:22 WARN]: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Float.floatValue()&quot; because the return value of &quot;io.papermc.paper.persistence.PersistentDataContainerView.get(org.bukkit.NamespacedKey, org.bukkit.persistence.PersistentDataType)&quot; is null
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>[12:51:22 WARN]:    at my-addon-MODIFIED-1757418660070.jar//io.github.pylonmc.myaddon.BaguetteOfWisdom.getPlaceholders(BaguetteOfWisdom.java:28)
<a id="__codelineno-12-3" name="__codelineno-12-3"></a>[12:51:22 WARN]:    at pylon-core-0.11.2.jar//io.github.pylonmc.pylon.core.guide.button.ItemButton.getItemProvider(ItemButton.kt:47)
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.gui.SlotElement$ItemSlotElement.getItemStack(SlotElement.java:44)
<a id="__codelineno-12-5" name="__codelineno-12-5"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.window.AbstractWindow.redrawItem(AbstractWindow.java:109)
<a id="__codelineno-12-6" name="__codelineno-12-6"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.window.AbstractSingleWindow.initItems(AbstractSingleWindow.java:58)
<a id="__codelineno-12-7" name="__codelineno-12-7"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.window.AbstractWindow.open(AbstractWindow.java:279)
<a id="__codelineno-12-8" name="__codelineno-12-8"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.window.AbstractWindow$AbstractBuilder.open(AbstractWindow.java:679)
<a id="__codelineno-12-9" name="__codelineno-12-9"></a>[12:51:22 WARN]:    at pylon-core-0.11.2.jar//io.github.pylonmc.pylon.core.guide.pages.base.GuidePage.open(GuidePage.kt:28)
<a id="__codelineno-12-10" name="__codelineno-12-10"></a>[12:51:22 WARN]:    at pylon-core-0.11.2.jar//io.github.pylonmc.pylon.core.guide.button.PageButton.handleClick(PageButton.kt:38)
<a id="__codelineno-12-11" name="__codelineno-12-11"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.gui.AbstractGui.handleClick(AbstractGui.java:95)
<a id="__codelineno-12-12" name="__codelineno-12-12"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.window.AbstractSingleWindow.handleClick(AbstractSingleWindow.java:84)
<a id="__codelineno-12-13" name="__codelineno-12-13"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.window.AbstractWindow.handleClickEvent(AbstractWindow.java:199)
<a id="__codelineno-12-14" name="__codelineno-12-14"></a>[12:51:22 WARN]:    at xyz.xenondevs.invui.window.WindowManager.handleInventoryClick(WindowManager.java:117)
<a id="__codelineno-12-15" name="__codelineno-12-15"></a>[12:51:22 WARN]:    at co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:80)
<a id="__codelineno-12-16" name="__codelineno-12-16"></a>[12:51:22 WARN]:    at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:71)
<a id="__codelineno-12-17" name="__codelineno-12-17"></a>[12:51:22 WARN]:    at io.papermc.paper.plugin.manager.PaperEventManager.callEvent(PaperEventManager.java:54)
<a id="__codelineno-12-18" name="__codelineno-12-18"></a>[12:51:22 WARN]:    at io.papermc.paper.plugin.manager.PaperPluginManagerImpl.callEvent(PaperPluginManagerImpl.java:131)
<a id="__codelineno-12-19" name="__codelineno-12-19"></a>[12:51:22 WARN]:    at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:628)
<a id="__codelineno-12-20" name="__codelineno-12-20"></a>[12:51:22 WARN]:    at net.minecraft.server.network.ServerGamePacketListenerImpl.handleContainerClick(ServerGamePacketListenerImpl.java:3208)
<a id="__codelineno-12-21" name="__codelineno-12-21"></a>[12:51:22 WARN]:    at net.minecraft.network.protocol.game.ServerboundContainerClickPacket.handle(ServerboundContainerClickPacket.java:59)
<a id="__codelineno-12-22" name="__codelineno-12-22"></a>[12:51:22 WARN]:    at net.minecraft.network.protocol.game.ServerboundContainerClickPacket.handle(ServerboundContainerClickPacket.java:14)
<a id="__codelineno-12-23" name="__codelineno-12-23"></a>[12:51:22 WARN]:    at net.minecraft.network.protocol.PacketUtils.lambda$ensureRunningOnSameThread$0(PacketUtils.java:29)
<a id="__codelineno-12-24" name="__codelineno-12-24"></a>[12:51:22 WARN]:    at net.minecraft.server.TickTask.run(TickTask.java:18)
<a id="__codelineno-12-25" name="__codelineno-12-25"></a>[12:51:22 WARN]:    at net.minecraft.util.thread.BlockableEventLoop.doRunTask(BlockableEventLoop.java:155)
<a id="__codelineno-12-26" name="__codelineno-12-26"></a>[12:51:22 WARN]:    at net.minecraft.util.thread.ReentrantBlockableEventLoop.doRunTask(ReentrantBlockableEventLoop.java:24)
<a id="__codelineno-12-27" name="__codelineno-12-27"></a>[12:51:22 WARN]:    at net.minecraft.server.MinecraftServer.doRunTask(MinecraftServer.java:1450)
<a id="__codelineno-12-28" name="__codelineno-12-28"></a>[12:51:22 WARN]:    at net.minecraft.server.MinecraftServer.doRunTask(MinecraftServer.java:176)
<a id="__codelineno-12-29" name="__codelineno-12-29"></a>[12:51:22 WARN]:    at net.minecraft.util.thread.BlockableEventLoop.pollTask(BlockableEventLoop.java:129)
<a id="__codelineno-12-30" name="__codelineno-12-30"></a>[12:51:22 WARN]:    at net.minecraft.server.MinecraftServer.pollTaskInternal(MinecraftServer.java:1430)
<a id="__codelineno-12-31" name="__codelineno-12-31"></a>[12:51:22 WARN]:    at net.minecraft.server.MinecraftServer.pollTask(MinecraftServer.java:1424)
<a id="__codelineno-12-32" name="__codelineno-12-32"></a>[12:51:22 WARN]:    at net.minecraft.util.thread.BlockableEventLoop.managedBlock(BlockableEventLoop.java:139)
<a id="__codelineno-12-33" name="__codelineno-12-33"></a>[12:51:22 WARN]:    at net.minecraft.server.MinecraftServer.managedBlock(MinecraftServer.java:1381)
<a id="__codelineno-12-34" name="__codelineno-12-34"></a>[12:51:22 WARN]:    at net.minecraft.server.MinecraftServer.waitUntilNextTick(MinecraftServer.java:1389)
<a id="__codelineno-12-35" name="__codelineno-12-35"></a>[12:51:22 WARN]:    at net.minecraft.server.MinecraftServer.runServer(MinecraftServer.java:1266)
<a id="__codelineno-12-36" name="__codelineno-12-36"></a>[12:51:22 WARN]:    at net.minecraft.server.MinecraftServer.lambda$spin$2(MinecraftServer.java:310)
</code></pre></div></td></tr></table></div>
<p>Wow. That's a fat error. But the lines we are most interested in are right at the top:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">console</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a>[12:51:22 WARN]: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Float.floatValue()&quot; because the return value of &quot;io.papermc.paper.persistence.PersistentDataContainerView.get(org.bukkit.NamespacedKey, org.bukkit.persistence.PersistentDataType)&quot; is null
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>[12:51:22 WARN]:    at my-addon-MODIFIED-1757418660070.jar//io.github.pylonmc.myaddon.BaguetteOfWisdom.getPlaceholders(BaguetteOfWisdom.java:28)
</code></pre></div></td></tr></table></div>
<p>So it looks like the error occurred on line 28, in the <code>getPlaceholders</code> function, where we try to read from the persistent data container. Apparently, the 'stored_xp' key couldn't be found in the PDC, because the call to <code>getStack().getPersistentDataContainer().get(...)</code> returned null.</p>
<div class="admonition question">
<p class="admonition-title">Wait, why did <code>getPlaceholders</code> get called and error <em>now</em>? We haven't given ourselves the item yet.</p>
<p>Simply put, the guide also needs to call <code>getPlaceholders</code> to display the item to you. The error only appears once you open the guide - or once you give yourself the item with <code>/py give</code>.</p>
</div>
<p>This actually makes perfect sense if you think about it. At no point do we set a default value for the stored XP, so of course any call to get it will return null.</p>
<h3 id="adding-a-default-value">Adding a default value</h3>
<p>To add a default value for stored XP to the PDC, we can modify the itemstack itself when we create it:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">MyAddon.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="n">NamespacedKey</span><span class="w"> </span><span class="n">baguetteOfWisdomKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;baguette_of_wisdom&quot;</span><span class="p">);</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="n">ItemStack</span><span class="w"> </span><span class="n">baguetteOfWisdom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemStackBuilder</span><span class="p">.</span><span class="na">pylonItem</span><span class="p">(</span><span class="n">Material</span><span class="p">.</span><span class="na">BREAD</span><span class="p">,</span><span class="w"> </span><span class="n">baguetteOfWisdomKey</span><span class="p">)</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="hll"><span class="w">        </span><span class="p">.</span><span class="na">editPdc</span><span class="p">(</span><span class="n">pdc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pdc</span><span class="p">.</span><span class="na">set</span><span class="p">(</span>
</span><a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="hll"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="hll"><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span><span class="p">,</span>
</span><a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="hll"><span class="w">                </span><span class="mi">0</span>
</span><a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="hll"><span class="w">        </span><span class="p">))</span>
</span><a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="n">PylonItem</span><span class="p">.</span><span class="na">register</span><span class="p">(</span><span class="n">BaguetteOfWisdom</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">baguetteOfWisdom</span><span class="p">);</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="n">BasePages</span><span class="p">.</span><span class="na">FOOD</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">baguetteOfWisdomKey</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Now let's try again.</p>
<p><img alt="Baguette of wisdom success" src="../img/baguette_of_wisdom_success.png" /></p>
<p>Ah, perfect!</p>
<p>One last thing left to do...</p>
<h3 id="cleaning-up">Cleaning up</h3>
<p>The Baguette of Wisdom works, but there are some improvements we can make.</p>
<p>First, we could pull out the get/set code into their own functions:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaguetteOfWisdom</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PylonItem</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PylonInteractor</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setStoredXp</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xp</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="hll"><span class="w">        </span><span class="n">getStack</span><span class="p">().</span><span class="na">editPersistentDataContainer</span><span class="p">(</span><span class="n">pdc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pdc</span><span class="p">.</span><span class="na">set</span><span class="p">(</span>
</span><a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="hll"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="hll"><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span><span class="p">,</span>
</span><a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="hll"><span class="w">                </span><span class="n">xp</span>
</span><a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="hll"><span class="w">        </span><span class="p">));</span>
</span><a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span><a id="__codelineno-15-11" name="__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getStoredXp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getStack</span><span class="p">().</span><span class="na">getPersistentDataContainer</span><span class="p">().</span><span class="na">get</span><span class="p">(</span>
</span><a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="hll"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">),</span>
</span><a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="hll"><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span>
</span><a id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="hll"><span class="w">        </span><span class="p">);</span>
</span><a id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span><a id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And now, we can use these functions in the rest of the code, which is much cleaner:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span>
<span class="normal"><a href="#__codelineno-16-20">20</a></span>
<span class="normal"><a href="#__codelineno-16-21">21</a></span>
<span class="normal"><a href="#__codelineno-16-22">22</a></span>
<span class="normal"><a href="#__codelineno-16-23">23</a></span>
<span class="normal"><a href="#__codelineno-16-24">24</a></span>
<span class="normal"><a href="#__codelineno-16-25">25</a></span>
<span class="normal"><a href="#__codelineno-16-26">26</a></span>
<span class="normal"><a href="#__codelineno-16-27">27</a></span>
<span class="normal"><a href="#__codelineno-16-28">28</a></span>
<span class="normal"><a href="#__codelineno-16-29">29</a></span>
<span class="normal"><a href="#__codelineno-16-30">30</a></span>
<span class="normal"><a href="#__codelineno-16-31">31</a></span>
<span class="normal"><a href="#__codelineno-16-32">32</a></span>
<span class="normal"><a href="#__codelineno-16-33">33</a></span>
<span class="normal"><a href="#__codelineno-16-34">34</a></span>
<span class="normal"><a href="#__codelineno-16-35">35</a></span>
<span class="normal"><a href="#__codelineno-16-36">36</a></span>
<span class="normal"><a href="#__codelineno-16-37">37</a></span>
<span class="normal"><a href="#__codelineno-16-38">38</a></span>
<span class="normal"><a href="#__codelineno-16-39">39</a></span>
<span class="normal"><a href="#__codelineno-16-40">40</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaguetteOfWisdom</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PylonItem</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PylonInteractor</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PylonArgument</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getPlaceholders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">                </span><span class="n">PylonArgument</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;xp_capacity&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">UnitFormat</span><span class="p">.</span><span class="na">EXPERIENCE</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">xpCapacity</span><span class="p">)),</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="hll"><span class="w">                </span><span class="n">PylonArgument</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;stored_xp&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">UnitFormat</span><span class="p">.</span><span class="na">EXPERIENCE</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">getStoredXp</span><span class="p">()))</span>
</span><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">        </span><span class="p">);</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onUsedToRightClick</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">PlayerInteractEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">isSneaking</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="hll"><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">xp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getStoredXp</span><span class="p">();</span>
</span><a id="__codelineno-16-17" name="__codelineno-16-17"></a>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">            </span><span class="c1">// 2. Give all the XP to the player</span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">            </span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">giveExp</span><span class="p">(</span><span class="n">xp</span><span class="p">);</span>
<a id="__codelineno-16-20" name="__codelineno-16-20"></a>
<a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">            </span><span class="c1">// 3. Set the stored XP to 0</span>
<a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="hll"><span class="w">            </span><span class="n">setStoredXp</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">            </span><span class="c1">// 1. Read how much XP we already have stored</span>
<a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="hll"><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">xp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getStoredXp</span><span class="p">();</span>
</span><a id="__codelineno-16-26" name="__codelineno-16-26"></a>
<a id="__codelineno-16-27" name="__codelineno-16-27"></a><span class="w">            </span><span class="c1">// 2. Figure out how much XP we need to take to get to `xpCapacity`</span>
<a id="__codelineno-16-28" name="__codelineno-16-28"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">extraXpNeeded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xpCapacity</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">xp</span><span class="p">;</span>
<a id="__codelineno-16-29" name="__codelineno-16-29"></a>
<a id="__codelineno-16-30" name="__codelineno-16-30"></a><span class="w">            </span><span class="c1">// 3. Take as much XP from the player as we can to get there</span>
<a id="__codelineno-16-31" name="__codelineno-16-31"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">xpToTake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">calculateTotalExperiencePoints</span><span class="p">(),</span><span class="w"> </span><span class="n">extraXpNeeded</span><span class="p">);</span>
<a id="__codelineno-16-32" name="__codelineno-16-32"></a><span class="w">            </span><span class="n">event</span><span class="p">.</span><span class="na">getPlayer</span><span class="p">().</span><span class="na">giveExp</span><span class="p">(</span><span class="o">-</span><span class="n">xpToTake</span><span class="p">);</span>
<a id="__codelineno-16-33" name="__codelineno-16-33"></a>
<a id="__codelineno-16-34" name="__codelineno-16-34"></a><span class="w">            </span><span class="c1">// 4. Set the new stored XP amount</span>
<a id="__codelineno-16-35" name="__codelineno-16-35"></a><span class="hll"><span class="w">            </span><span class="n">setStoredXp</span><span class="p">(</span><span class="n">xp</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">xpToTake</span><span class="p">);</span>
</span><a id="__codelineno-16-36" name="__codelineno-16-36"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-37" name="__codelineno-16-37"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-38" name="__codelineno-16-38"></a>
<a id="__codelineno-16-39" name="__codelineno-16-39"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-16-40" name="__codelineno-16-40"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The second thing we should do is reuse NamespacedKeys. This is more of a 'best practice' thing - it's generally recommend to reuse keys. It'll become more apparent why later on.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BaguetteOfWisdom.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaguetteOfWisdom</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PylonItem</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PylonInteractor</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="w"> </span><span class="n">STORED_XP_KEY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NamespacedKey</span><span class="p">(</span><span class="n">MyAddon</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;stored_xp&quot;</span><span class="p">);</span>
</span><a id="__codelineno-17-3" name="__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setStoredXp</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xp</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">        </span><span class="n">getStack</span><span class="p">().</span><span class="na">editPersistentDataContainer</span><span class="p">(</span><span class="n">pdc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pdc</span><span class="p">.</span><span class="na">set</span><span class="p">(</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="hll"><span class="w">                </span><span class="n">STORED_XP_KEY</span><span class="p">,</span>
</span><a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span><span class="p">,</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">                </span><span class="n">xp</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">        </span><span class="p">));</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getStoredXp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getStack</span><span class="p">().</span><span class="na">getPersistentDataContainer</span><span class="p">().</span><span class="na">get</span><span class="p">(</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="hll"><span class="w">                </span><span class="n">STORED_XP_KEY</span><span class="p">,</span>
</span><a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">        </span><span class="p">);</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">MyAddon.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span>
<span class="normal"><a href="#__codelineno-18-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">ItemStack</span><span class="w"> </span><span class="n">baguetteOfWisdom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemStackBuilder</span><span class="p">.</span><span class="na">pylonItem</span><span class="p">(</span><span class="n">Material</span><span class="p">.</span><span class="na">BREAD</span><span class="p">,</span><span class="w"> </span><span class="n">baguetteOfWisdomKey</span><span class="p">)</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">        </span><span class="p">.</span><span class="na">editPdc</span><span class="p">(</span><span class="n">pdc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pdc</span><span class="p">.</span><span class="na">set</span><span class="p">(</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="hll"><span class="w">                </span><span class="n">BaguetteOfWisdom</span><span class="p">.</span><span class="na">STORED_XP_KEY</span><span class="p">,</span>
</span><a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">                </span><span class="n">PylonSerializers</span><span class="p">.</span><span class="na">INTEGER</span><span class="p">,</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">                </span><span class="mi">0</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">        </span><span class="p">))</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>And that's it!</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../advanced-lore/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Advanced lore">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Advanced lore
              </div>
            </div>
          </a>
        
        
          
          <a href="../full-code/" class="md-footer__link md-footer__link--next" aria-label="Next: Full code">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Full code
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://discord.gg/4tMAnBAacW" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.317 4.37a19.8 19.8 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.3 18.3 0 0 0-5.487 0 13 13 0 0 0-.617-1.25.08.08 0 0 0-.079-.037A19.7 19.7 0 0 0 3.677 4.37a.1.1 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.08.08 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.08.08 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13 13 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10 10 0 0 0 .372-.292.07.07 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.07.07 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.3 12.3 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.08.08 0 0 0 .084.028 19.8 19.8 0 0 0 6.002-3.03.08.08 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.06.06 0 0 0-.031-.03M8.02 15.33c-1.182 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418m7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/pylonmc" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.footer"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>